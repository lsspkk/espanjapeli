{
  "phase": 3,
  "title": "INTEGRATE STEPWISE REVEAL INTO EXISTING GAMES",
  "description": "Add stepwise reveal pattern to existing quiz games. This is gradual integration - start with one game, verify it works, then apply to others.",
  "estimatedHours": "10-14 hours",
  "tasks": [
    {
      "id": "task-7",
      "title": "Integrate Stepwise Reveal into Yhdistäsanat",
      "description": "Refactor Yhdistäsanat quiz phase to use stepwise reveal. Show Spanish/Finnish word first, speak with TTS if enabled, then reveal answer buttons after delay.",
      "estimatedHours": "3-4 hours",
      "subtasks": [
        {
          "id": "7.1",
          "title": "Add StepwiseReveal to quiz phase",
          "description": "Import StepwiseReveal component. Wrap QuestionCard in default slot (always visible). Wrap OptionButtons in answers slot (revealed after delay). Get delay from stepwiseSettings store.",
          "files": [
            "svelte/src/routes/yhdistasanat/+page.svelte"
          ]
        },
        {
          "id": "7.2",
          "title": "Coordinate TTS with reveal",
          "description": "Speak word when question displays (if autoSpeak enabled). Ensure TTS completes before delay timer starts OR runs in parallel. Decision: TTS and delay run in parallel (simpler implementation).",
          "files": [
            "svelte/src/routes/yhdistasanat/+page.svelte"
          ]
        },
        {
          "id": "7.3",
          "title": "Add delay selector to game home page",
          "description": "Add section for configuring reveal delay. Use simple number input or slider. Range: 0-4 seconds with 0.25s increments. Save to stepwiseSettings store with 'yhdistasanat' key.",
          "files": [
            "svelte/src/routes/yhdistasanat/+page.svelte"
          ]
        },
        {
          "id": "7.4",
          "title": "Add visual waiting indicator",
          "description": "Show subtle indicator during delay (e.g., \"Muistele...\" text). Or small animation below question card. Keep design consistent with basic game style.",
          "files": [
            "svelte/src/routes/yhdistasanat/+page.svelte"
          ]
        }
      ],
      "testing": [
        "Manual: Play game with delay=0, verify immediate answer display",
        "Manual: Play game with delay=3, verify 3-second pause before answers",
        "Verify TTS speaks correctly",
        "Verify settings persist after page refresh"
      ]
    },
    {
      "id": "task-8",
      "title": "Integrate Stepwise Reveal into Pipsan maailma",
      "description": "Add stepwise reveal to Pipsan maailma with kid-friendly TokenCounter animation. Show question, animate tokens, then reveal image options.",
      "estimatedHours": "3-4 hours",
      "subtasks": [
        {
          "id": "8.1",
          "title": "Add TokenCounter and stepwise logic",
          "description": "Import TokenCounter component. Add state for revealed: boolean. Show question content immediately. Show TokenCounter during delay. Reveal image options when TokenAnimation completes.",
          "files": [
            "svelte/src/routes/pipsan-maailma/+page.svelte"
          ]
        },
        {
          "id": "8.2",
          "title": "Add theme rotation logic",
          "description": "Track last used theme. Select random theme different from last. Pass theme to TokenAnimation.",
          "files": [
            "svelte/src/routes/pipsan-maailma/+page.svelte"
          ]
        },
        {
          "id": "8.3",
          "title": "Add TokenDelaySelector to start screen",
          "description": "Add selector below existing settings on KidsStartScreen. Connect to stepwiseSettings store with 'pipsanMaailma' key. Show preview of selected token count.",
          "files": [
            "svelte/src/routes/pipsan-maailma/+page.svelte"
          ]
        }
      ],
      "testing": [
        "Manual: Verify TokenAnimation animation plays correctly",
        "Manual: Verify different themes appear",
        "Verify delay setting persists"
      ]
    },
    {
      "id": "task-9",
      "title": "Integrate Stepwise Reveal into Pipsan ystävät",
      "description": "Same as Task 8 but for Pipsan ystävät game. Reuse same components and patterns.",
      "estimatedHours": "2-3 hours",
      "subtasks": [
        {
          "id": "9.1",
          "title": "Add TokenAnimation and stepwise logic",
          "description": "Same pattern as Pipsan maailma. Import TokenAnimation, add revealed state. Show tokens during delay.",
          "files": [
            "svelte/src/routes/pipsan-ystavat/+page.svelte"
          ]
        },
        {
          "id": "9.2",
          "title": "Add TokenDelaySelector to start screen",
          "description": "Add to KidsStartScreen section. Connect to stepwiseSettings with 'pipsanYstavat' key.",
          "files": [
            "svelte/src/routes/pipsan-ystavat/+page.svelte"
          ]
        }
      ],
      "testing": [
        "Manual: Play game, verify token animation and reveal works"
      ]
    },
    {
      "id": "task-10",
      "title": "Update Kids Game Home Pages with Delay Selector",
      "description": "Ensure both kids game home screens have consistent delay selector UI. The KidsStartScreen component may need modification to support delay selector as a slot or prop.",
      "estimatedHours": "2-3 hours",
      "subtasks": [
        {
          "id": "10.1",
          "title": "Review and update KidsStartScreen component",
          "description": "Check if component supports additional settings section. Add slot or prop for custom settings (delay selector). Maintain existing styling and layout.",
          "files": [
            "svelte/src/lib/components/kids/home/KidsStartScreen.svelte"
          ]
        },
        {
          "id": "10.2",
          "title": "Verify consistent styling across both kids games",
          "description": "Delay selector should look identical in both games. Use same theme preview visuals. Mobile-first responsive design.",
          "files": [
            "svelte/src/routes/pipsan-maailma/+page.svelte",
            "svelte/src/routes/pipsan-ystavat/+page.svelte"
          ]
        }
      ],
      "testing": [
        "Visual: Compare both games' home screens for consistency"
      ]
    }
  ]
}
